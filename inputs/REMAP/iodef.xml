<?xml version="1.0"?>
<simulation>

 <context id="test">
   <calendar type="Gregorian" start_date="2012-03-01 15:00:00" time_origin="2012-02-28 15:00:00 + 1d" />
   <field_definition level="1" >
     <field id="src_field" operation="instant" domain_ref="src_domain_clone"/>
     <field id="src_field_3D" operation="instant" domain_ref="src_domain" axis_ref="src_axis"/>
     <field id="src_field_3D_interp" operation="instant" field_ref="src_field_3D" axis_ref="dst_axis"/>
     <field id="src_field_3D_pression" operation="instant" grid_ref="src_grid_3D"/>
     <field id="src_field_clone" operation="instant" field_ref="src_field" domain_ref="src_domain_clone"/>
     <field id="dst_field" operation="instant" field_ref="src_field" domain_ref="dst_domain"/>
     <field id="dst_field_regular_pole" operation="instant" field_ref="src_field" domain_ref="dst_domain_regular_pole"/>
<!--     <field id="tmp_field" operation="instant" domain_ref="src_domain_regular_tmp"/>-->
<!--     <field id="tmp_field_clone" field_ref="tmp_field"/>-->
<!--     <field id="tmp_field_1" operation="instant" grid_ref="src_grid_curvilinear" />-->
<!--     <field id="tmp_field_2" operation="instant" grid_ref="src_grid_unstructured" />-->
<!--     <field id="dst_field_regular" operation="instant" field_ref="tmp_field_2" grid_ref="dst_grid_regular" read_access="true"/>-->
<!--     <field id="dst_field_3D" operation="instant" field_ref="src_field_3D" grid_ref="dst_grid_3D"/>-->
<!--     <field id="dst_field_regular_pole_1" operation="instant" field_ref="tmp_field" domain_ref="dst_domain_regular_pole"/>-->
<!--     <field id="dst_field_regular_pole_2" operation="instant" field_ref="tmp_field_clone" domain_ref="dst_domain_regular_pole"/>-->
   </field_definition>

   <file_definition type="one_file" par_access="collective" output_freq="1ts" output_level="10" enabled=".TRUE.">
     <file id="output" name="output">
        <field field_ref="src_field" name="field" />
     </file>
     <file id="output_2D" name="output_2D">
        <field field_ref="src_field" name="field"  domain_ref="dst_domain_regular_pole" default_value="10.e+5"/>
     </file>
    <file id="output_3D_pression" name="output_3D_pression">
        <field field_ref="src_field_3D_pression" name="field" />
     </file>
     <file id="output_clone" name="output_clone">
<!--        <field field_ref="src_field_clone" name="field" />-->
     </file>
     <file id="output_dst" name="output_dst" type="one_file">
<!--        <field field_ref="dst_field" name="field" />-->
     </file>
     <file id="out_dst_regular_pole" name="out_dst_regular_pole" type="one_file">
<!--        <field field_ref="dst_field_regular_pole" name="field" />-->
     </file>
     <file id="regular_field_3D" name="regular_field_3D" type="one_file">
        <field field_ref="src_field_3D_interp" name="field" domain_ref="dst_domain_regular_pole" />
     </file>
    <file id="regular_field_3D_interp" name="regular_field_3D_interp" type="one_file">
        <field field_ref="src_field_3D_interp" name="field" />
     </file>
<!--     <file id="out_dst_regular_pole_1" name="out_dst_regular_pole_1" type="one_file">-->
<!--        <field field_ref="dst_field_regular_pole_1" name="field" />-->
<!--     </file>-->
<!--     <file id="out_dst_regular_pole_2" name="out_dst_regular_pole_2" type="one_file">-->
<!--        <field field_ref="dst_field_regular_pole_2" name="field" />-->
<!--     </file>-->
<!--     <file id="output_dst_regular" name="output_dst_regular" type="one_file">-->
<!--        <field field_ref="dst_field_regular" name="field" />-->
<!--     </file>-->
<!--     <file id="output_dst_curvilinear" name="output_dst_curvilinear" type="one_file">-->
<!--        <field field_ref="tmp_field_1" operation="instant"/>-->
<!--     </file>-->
<!--     <file id="output_dst_unstructured" name="output_dst_unstructured" type="one_file">-->
<!--        <field field_ref="tmp_field_2" operation="instant"/>-->
<!--     </file>-->
<!--     <file id="output_src_regular_tmp" name="output_src_regular_tmp" mode="read" type="one_file">-->
<!--        <field id="src_field_regular_tmp" name="field" domain_ref="src_domain_regular_tmp" operation="instant"/>-->
<!--     </file>-->
<!--     <file id="output_src_curvilinear" name="output_src_curvilinear" mode="read" type="one_file">-->
<!--        <field id="src_field_curvilinear" name="field_A" grid_ref="src_grid_curvilinear" operation="instant"/>-->
<!--     </file>-->
<!--     <file id="output_unstructured" name="output_unstructured" mode="read" type="one_file">-->
<!--        <field id="field_src_unstructred" name="field" grid_ref="src_grid_unstructured" operation="instant"/>-->
<!--     </file>-->
   </file_definition>


   <axis_definition>
     <axis id="dst_axis" positive="down" n_glo="2" value="(0,1)[120 220]">
        <interpolate_axis type="polynomial" order="1" coordinate="src_field_3D_pression"/>
<!--        <interpolate_axis type="polynomial" order="1" />-->
     </axis>
     <axis id="src_axis" positive="down" />
     <axis id="src_axis_curvilinear" />
   </axis_definition>

   <domain_definition>
     <domain id="src_domain" />
     <domain id="src_domain_clone"/>
     <domain id="dst_domain">
       <interpolate_domain/>
     </domain>
     <domain id="dst_domain_regular_pole" ni_glo="90" nj_glo="45" type="rectilinear">
       <generate_rectilinear_domain id="domain_regular_pole"/>
       <interpolate_domain/>
     </domain>
     <domain id="dst_domain_regular" ni_glo="90" nj_glo="45" type="rectilinear">
       <generate_rectilinear_domain />
       <interpolate_domain/>
     </domain>
     <domain id="src_domain_regular_tmp" type="rectilinear">
       <generate_rectilinear_domain />
     </domain>
     <domain id="src_domain_curvilinear" type="curvilinear">
       <generate_rectilinear_domain />
     </domain>
     <domain id="src_domain_unstructured" type="unstructured">
       <generate_rectilinear_domain />
     </domain>
   </domain_definition>

  <grid_definition>
    <grid id="src_grid_curvilinear">
      <domain domain_ref="src_domain_curvilinear"/>
      <axis axis_ref="src_axis_curvilinear" />
    </grid>
    <grid id="src_grid_unstructured">
      <domain domain_ref="src_domain_unstructured"/>
    </grid>
    <grid id="dst_grid_regular">
      <domain domain_ref="dst_domain_regular"/>
    </grid>
    <grid id="src_grid_3D">
      <domain domain_ref="src_domain"/>
      <axis axis_ref="src_axis"/>
    </grid>
    <grid id="dst_grid_3D">
<!--      <domain domain_ref="src_domain"/>-->
      <domain domain_ref="dst_domain_regular_pole"/>
<!--      <axis axis_ref="src_axis"/>-->
      <axis axis_ref="dst_axis"/>
    </grid>
  </grid_definition>
  </context>

  <context id="xios">
      <variable_definition>
        <variable_group id="buffer">
            <variable id="optimal_buffer_size" type="string">performance</variable>
            <variable id="buffer_size_factor" type="double">30.0</variable>
            <variable id="min_buffer_size" type="double">800000</variable>
         </variable_group>

        <variable_group id="parameters" >
          <variable id="using_server" type="bool">true</variable>
          <variable id="info_level" type="int">50</variable>
          <variable id="print_file" type="bool">true</variable>
        </variable_group>
      </variable_definition>
  </context>

</simulation>

